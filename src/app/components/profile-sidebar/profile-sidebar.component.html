<div class="profile-sidebar" *ngIf="user">
  <!-- Profile Avatar - Displays user's GitHub profile picture in a circular container -->
  <div class="avatar-container">
    <img
      [src]="getAvatarUrl()"
      [alt]="user.login"
      class="avatar"
      (error)="handleImageError($event)"
    />
  </div>

  <div class="user-info">
    <h1 class="user-name">{{ user.name || user.login }}</h1>
    <p class="user-login">{{ user.login }}</p>
  </div>

  <div class="follow-section">
    <button class="follow-btn">Edit Profile</button>
  </div>
  <div class="user-bio" *ngIf="user.bio">
    <p>{{ user.bio }}</p>
  </div>

  <div class="user-details">
    <div class="detail-item" *ngIf="user.company">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="M1.75 16A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.75.75 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v7.965A1.75 1.75 0 0 1 14.25 16h-3.5a.75.75 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75Zm-.25-1.75c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM3.75 6h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 3.75A.75.75 0 0 1 3.75 3h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 3.75Zm0 5.5A.75.75 0 0 1 3.75 8h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 9.25ZM7.75 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Zm0 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z"
        ></path>
      </svg>
      <span>{{ user.company }}</span>
    </div>

    <div class="detail-item" *ngIf="user.location">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="m12.596 11.596-3.535 3.536a1.5 1.5 0 0 1-2.122 0l-3.535-3.536a6.5 6.5 0 1 1 9.192-9.193 6.5 6.5 0 0 1 0 9.193Zm-1.06-8.132a5 5 0 1 0-7.072 7.072L8 14.07l3.536-3.535a5 5 0 0 0 0-7.072ZM8 9a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 9Z"
        ></path>
      </svg>
      <span>{{ user.location }}</span>
    </div>

    <div class="detail-item" *ngIf="user.email">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="M0 4.75C0 3.784.784 3 1.75 3h12.5c.966 0 1.75.784 1.75 1.75v6.5A1.75 1.75 0 0 1 14.25 13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v.576l6.214 3.842a.75.75 0 0 0 .772 0L14 11.576V4.75a.25.25 0 0 0-.25-.25ZM14 12.926V11.25l-5.842 3.608a.75.75 0 0 1-.316 0L2 11.25v1.676c0 .138.112.25.25.25h11.5a.25.25 0 0 0 .25-.25Z"
        ></path>
      </svg>
      <a [href]="'mailto:' + user.email">{{ user.email }}</a>
    </div>

    <div class="detail-item" *ngIf="user.blog">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25Zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83-2.83Z"
        ></path>
      </svg>
      <a [href]="user.blog" target="_blank" rel="noopener noreferrer">{{ user.blog }}</a>
    </div>

    <div class="detail-item" *ngIf="user.linkedin_username">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="M12.225 12.225h-1.778V9.44c0-.664-.012-1.519-.925-1.519-.926 0-1.068.724-1.068 1.47v2.834H6.676V6.498h1.707v.783h.024c.348-.594.996-.95 1.684-.925 1.802 0 2.135 1.185 2.135 2.728l-.001 3.14zM4.67 5.715a1.037 1.037 0 01-1.032-1.031c0-.566.466-1.032 1.032-1.032.566 0 1.031.466 1.032 1.032 0 .566-.466 1.032-1.032 1.032zm.889 6.51h-1.78V6.498h1.78v5.727zM13.11 2H2.885A.88.88 0 002 2.866v10.268a.88.88 0 00.885.866h10.226a.882.882 0 00.889-.866V2.865a.88.88 0 00-.889-.864z"
        ></path>
      </svg>
      <a
        [href]="'https://linkedin.com/in/' + user.linkedin_username"
        target="_blank"
        rel="noopener noreferrer"
        >{{ user.linkedin_username }}</a
      >
    </div>

    <div class="detail-item" *ngIf="user.twitter_username">
      <svg
        class="icon"
        aria-hidden="true"
        height="16"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        fill="currentColor"
      >
        <path
          d="M5.526 13.239c5.032 0 7.784-4.174 7.784-7.794 0-.119 0-.237-.008-.354A5.566 5.566 0 0 0 15 4.18a5.44 5.44 0 0 1-1.563.429 2.757 2.757 0 0 0 1.211-1.523 5.505 5.505 0 0 1-1.746.667 2.75 2.75 0 0 0-4.684 2.508 7.802 7.802 0 0 1-5.665-2.873 2.75 2.75 0 0 0 .851 3.669 2.738 2.738 0 0 1-1.244-.345v.035c0 1.332.947 2.443 2.203 2.695a2.76 2.76 0 0 1-1.24.048 2.752 2.752 0 0 0 2.567 1.91 5.52 5.52 0 0 1-3.414 1.177 5.528 5.528 0 0 1-.655-.038 7.78 7.78 0 0 0 4.212 1.235"
        ></path>
      </svg>
      <a
        [href]="'https://twitter.com/' + user.twitter_username"
        target="_blank"
        rel="noopener noreferrer"
        >{{ user.twitter_username }}</a
      >
    </div>
  </div>

  <div class="stats">
    <div class="stat-item">
      <a [href]="user.html_url + '?tab=followers'">
        <svg
          class="icon"
          aria-hidden="true"
          height="16"
          viewBox="0 0 16 16"
          version="1.1"
          width="16"
          fill="currentColor"
        >
          <path
            d="M5.5 3.5a2 2 0 1 1 0 4 2 2 0 0 1 0-4ZM2 8.25a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0Zm10.5-4.75a2 2 0 1 1 0 4 2 2 0 0 1 0-4ZM14 8.25a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0ZM5.5 10.25a5.23 5.23 0 0 0-3.5 2.086v1.414h7v-1.414A5.23 5.23 0 0 0 5.5 10.25Zm-4 2.336a3.736 3.736 0 0 1 4-2.086 3.736 3.736 0 0 1 4 2.086v.664H1.5v-.664Zm9.5 0a3.736 3.736 0 0 0-4-2.086 3.736 3.736 0 0 0-4 2.086v.664h8v-.664Z"
          ></path>
        </svg>
        <span
          ><strong>{{ user.followers }}</strong> followers</span
        >
      </a>
    </div>
    <div class="stat-item">
      <span> Â· </span>
      <a [href]="user.html_url + '?tab=following'">
        <span
          ><strong>{{ user.following }}</strong> following</span
        >
      </a>
    </div>
  </div>

  <!-- Sponsors Section -->
  <div class="sponsors-section" *ngIf="sponsors.length > 0">
    <h3 class="section-title">Sponsors</h3>
    <div class="sponsors-grid">
      @for (sponsor of sponsors.slice(0, 11); track sponsor.id) {
      <a
        [href]="sponsor.html_url"
        [title]="sponsor.login"
        class="sponsor-avatar"
        target="_blank"
        rel="noopener noreferrer"
      >
        <img
          [src]="sponsor.avatar_url"
          [alt]="sponsor.login"
          (error)="$event.target.src = 'https://github.com/identicons/' + sponsor.login + '.png'"
        />
      </a>
      } @if (sponsors.length > 11) {
      <div class="sponsor-more">+{{ sponsors.length - 11 }}</div>
      }
    </div>
  </div>

  <!-- Achievements Section -->
  <div class="achievements-section" *ngIf="achievements.length > 0">
    <h3 class="section-title">Achievements</h3>
    <div class="achievements-grid">
      @for (achievement of achievements; track achievement.id) {
      <div
        class="achievement-item"
        [title]="achievement.name + (achievement.count ? ' x' + achievement.count : '')"
      >
        <span class="achievement-icon">{{ achievement.icon }}</span>
        @if (achievement.count && achievement.count > 1) {
        <span class="achievement-count">{{ achievement.count }}</span>
        }
      </div>
      }
    </div>
  </div>

  <!-- Highlights Section -->
  <div class="highlights-section" *ngIf="highlights.length > 0">
    <h3 class="section-title">Highlights</h3>
    <div class="highlights-list">
      @for (highlight of highlights; track highlight.id) {
      <div class="highlight-item">
        @if (highlight.type === 'program') {
        <svg
          class="highlight-icon"
          aria-hidden="true"
          height="16"
          viewBox="0 0 16 16"
          version="1.1"
          width="16"
          fill="currentColor"
        >
          <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
          <path
            d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"
          ></path>
        </svg>
        } @else {
        <svg
          class="highlight-icon"
          aria-hidden="true"
          height="16"
          viewBox="0 0 16 16"
          version="1.1"
          width="16"
          fill="currentColor"
        >
          <path
            d="M8 .25a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V1A.75.75 0 0 1 8 .25Zm7 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5H15a.75.75 0 0 1 .75.75ZM8 12.25a.75.75 0 0 1 .75.75V15a.75.75 0 0 1-1.5 0v-2a.75.75 0 0 1 .75-.75Zm-7-4a.75.75 0 0 1 .75-.75H4a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1-.75-.75Zm11.78-7.22a.749.749 0 0 1 1.06 0l1.75 1.75a.749.749 0 0 1 0 1.06l-1.75 1.75a.749.749 0 1 1-1.06-1.06l1.22-1.22-1.22-1.22a.749.749 0 0 1 0-1.06Zm-9.56 0a.749.749 0 0 1 0 1.06L2.22 4.25l1.22 1.22a.749.749 0 1 1-1.06 1.06L.97 5.31a.749.749 0 0 1 0-1.06l1.75-1.75a.749.749 0 0 1 1.06 0ZM15.03 10.69a.749.749 0 0 1 0 1.06l-1.75 1.75a.749.749 0 1 1-1.06-1.06l1.22-1.22-1.22-1.22a.749.749 0 1 1 1.06-1.06l1.75 1.75Zm-9.56 3.5a.749.749 0 0 1 0-1.06l1.22-1.22 1.22 1.22a.749.749 0 1 1-1.06 1.06l-1.75-1.75a.749.749 0 0 1 0-1.06l1.75-1.75a.749.749 0 1 1 1.06 1.06Z"
          ></path>
        </svg>
        }
        <span class="highlight-label">{{ highlight.label }}</span>
        @if (highlight.badge) {
        <span class="highlight-badge">{{ highlight.badge }}</span>
        }
      </div>
      }
    </div>
  </div>

  <!-- Organizations Section -->
  <div class="organizations-section" *ngIf="organizations.length > 0">
    <h3 class="section-title">Organizations</h3>
    <div class="organizations-grid">
      @for (org of organizations; track org.id) {
      <a [href]="org.html_url" [title]="org.login" class="org-avatar">
        <img [src]="org.avatar_url" [alt]="org.login" />
      </a>
      }
    </div>
  </div>
</div>
